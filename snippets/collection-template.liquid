{% comment %}
  Collection template, used on collection.liquid and collection.image.liquid
{% endcomment %}

{% if collection.handle == 'ask-us' %}
{% assign limit = 1000 %}
{% else%}
{% assign limit = 30 %}
{% endif %}
{% paginate collection.products by limit %}


{% include 'sidebar-collection' %}

<div class="grid__item large--five-sixths">
  
  <header class="section-header text-left">
    <h1>{{ collection.title }}</h1>
    
    
    {% for block in section.blocks %}
    {% assign coll = block.settings.collection %}
    {% if collection.handle == coll %}
    <div class="grid">
      <div class="grid__item">
        <div class="rte">
          <div class="swiper-container collection_banner">
            <div class="swiper-wrapper">
              {% if block.settings.image_enable_1 %}
              {% if block.settings.image_1 != blank %}
              <div class="swiper-slide">
                {% if block.settings.image_url_1 != blank %}<a href="{{block.settings.image_url_1}}">{% endif %}
                <img src="{{block.settings.image_1 | img_url: 'original'}}" alt="{{collection.title}}">
                {% if block.settings.image_url_1 != blank %}</a>{% endif %}
              </div>
              {% endif %}
              {% endif %}
              {% if block.settings.image_enable_2 %}
              {% if block.settings.image_2 != blank %}
              <div class="swiper-slide">
                {% if block.settings.image_url_2 != blank %}<a href="{{block.settings.image_url_2}}">{% endif %}
                <img src="{{block.settings.image_2 | img_url: 'original'}}" alt="{{collection.title}}">
                {% if block.settings.image_url_2 != blank %}</a>{% endif %}
              </div>
              {% endif %}
              {% endif %}
              {% if block.settings.image_enable_3 %}
              {% if block.settings.image_3 != blank %}
              <div class="swiper-slide">
                {% if block.settings.image_url_3 != blank %}<a href="{{block.settings.image_url_3}}">{% endif %}
                <img src="{{block.settings.image_3 | img_url: 'original'}}" alt="{{collection.title}}">
                {% if block.settings.image_url_3 != blank %}</a>{% endif %}
              </div>
              {% endif %}
              {% endif %}
              {% if block.settings.image_enable_4 %}
              {% if block.settings.image_4 != blank %}
              <div class="swiper-slide">
                {% if block.settings.image_url_4 != blank %}<a href="{{block.settings.image_url_4}}">{% endif %}
                <img src="{{block.settings.image_4 | img_url: 'original'}}" alt="{{collection.title}}">
                {% if block.settings.image_url_4 != blank %}</a>{% endif %}
              </div>
              {% endif %}
              {% endif %}
              {% if block.settings.image_enable_5 %}
              {% if block.settings.image_5 != blank %}
              <div class="swiper-slide">
                {% if block.settings.image_url_5 != blank %}<a href="{{block.settings.image_url_5}}">{% endif %}
                <img src="{{block.settings.image_5 | img_url: 'original'}}" alt="{{collection.title}}">
                {% if block.settings.image_url_5 != blank %}</a>{% endif %}
              </div>
              {% endif %}
              {% endif %}
              {% if block.settings.image_enable_6 %}
              {% if block.settings.image_6 != blank %}
              <div class="swiper-slide">
                {% if block.settings.image_url_6 != blank %}<a href="{{block.settings.image_url_6}}">{% endif %}
                <img src="{{block.settings.image_6 | img_url: 'original'}}" alt="{{collection.title}}">
                {% if block.settings.image_url_6 != blank %}</a>{% endif %}
              </div>
              {% endif %}
              {% endif %}
            </div>
            <div class="swiper-pagination"></div>
          </div>
        </div>
      </div>
    </div>
    {% endif %}
    {% endfor %}

    {% if collection.description != blank %}
    <div class="grid">
      <div class="grid__item">
        <div class="rte">
          {{ collection.description }}
        </div>
      </div>
    </div>
    {% endif %}

    <div class="grid--full collection-sorting{% if section.settings.collection_sort_enable %} collection-sorting--enabled{% endif %}">
      {% if section.settings.collection_sort_enable %}
      {% include 'collection-sorting' %}
      {% endif %}
    </div>


  </header>
  
  {% if section.settings.collection_products_grid == 'collage' %}
  <div class="grid grid-collage">
    {% comment %}
    Loop through our products in the current collection.
    See the snippet 'snippets/product-grid-collage.liquid'.

    `is_reverse_row__product`, `three_row_index__product`, `collection_product_count`, and `divisible_by_three__product` are
    all used by 'snippets/product-grid-collage.liquid'
    {% endcomment %}
    {% assign is_reverse_row__product = false %}
    {% assign three_row_index__product = 0 %}
    {% assign collection_product_count__product = collection.products.size %}
    {% assign divisible_by_three__product = collection_product_count__product | modulo:3 %}
    {% for product in collection.products %}
    {% include 'product-grid-collage' %}
    {% else %}

    {% if shop.products_count == 0 %}
    {% comment %}
    Add default products to help with onboarding for collections/all only
    {% endcomment %}
    {% include 'onboarding-featured-products' %}
    {% else %}
    {% comment %}
    If collection exists but is empty, display message
    {% endcomment %}
    <div class="grid__item text-left">
      <p>{{ 'collections.general.no_matches' | t }}</p>
    </div>
    {% endif %}
    {% endfor %}

  </div>
  {% elsif section.settings.collection_products_grid == 'grid' %}
  <div class="grid-uniform product-loop">
    {% assign grid_item_width = 'one-half medium--one-third large--one-third' %}
    {% for product in collection.products %}
    {% include 'bold-product' with product, hide_action: 'skip' %}
    {% if collection.handle == 'ask-us' %}
    {% unless product.available %}
    {% include 'product-grid-item' %}
    {% endunless %}
    {% else %}
    {% include 'product-grid-item' %}
    {% endif %}
    {% else %}
    {% if collection.handle == 'all' %}
    {% comment %}
    Add default products to help with onboarding for collections/all only
    {% endcomment %}
    {% include 'onboarding-featured-products' %}
    {% else %}
    {% comment %}
    If collection exists but is empty, display message
    {% endcomment %}
    <div class="grid__item text-left">
      <p>{{ 'collections.general.no_matches' | t }}</p>
    </div>
    {% endif %}
    {% endfor %}
  </div>
  {% endif %}
</div>

{% if paginate.pages > 1 %}
  {% include 'pagination' %}
{% endif %}

{% endpaginate %}

<script>
  $(document).ready(function(){
    $(".site-nav--active").parents("li").addClass("open");
  });
</script>